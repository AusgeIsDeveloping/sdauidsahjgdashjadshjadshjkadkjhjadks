import discord
from discord.ext import commands
import pygame
import os

TOKEN = "MTQ3MTg5OTIyOTk3MzY0NzM3MA."
TOKEN2 = "GpC38w.3CSYmJOx9Go8p5zjMGy-QfSf0_1C6pRjPMEBXA"

intents = discord.Intents.default()
intents.message_content = True

bot = commands.Bot(command_prefix="!", intents=intents)

TEMP_FILE = "soundfile"

# Pygame Audio initialisieren
pygame.mixer.init()


@bot.command()
async def sound(ctx):
    # PrÃ¼fen ob Datei angehÃ¤ngt wurde
    if len(ctx.message.attachments) == 0:
        await ctx.send("Bitte eine Sound-Datei anhÃ¤ngen!")
        return

    attachment = ctx.message.attachments[0]

    # Datei speichern (Original-Dateiname behalten)
    filename = TEMP_FILE + os.path.splitext(attachment.filename)[1]
    await attachment.save(filename)

    try:
        pygame.mixer.music.load(filename)
        pygame.mixer.music.play()
        await ctx.send("Sound wird auf dem PC abgespielt ðŸ”Š")
    except Exception as e:
        await ctx.send(f"Fehler beim Abspielen: {e}")


@bot.command()
async def stopsound(ctx):
    if pygame.mixer.music.get_busy():
        pygame.mixer.music.stop()
        await ctx.send("Sound gestoppt â›”")
    else:
        await ctx.send("Es lÃ¤uft gerade kein Sound.")


bot.run(TOKEN+TOKEN2)
